<app-header></app-header>

<section class="w-screen h-screen px-[100px] pt-[150px]">
    <div class="h-[700px] w-full rounded-3xl flex flex-col relative items-center justify-between pb-[40px]">
        <img src="{{helpsData().background}}" alt="" class="w-full h-full rounded-3xl absolute top-0 left-0 z-[-2]"/>

        <div class="flex w-full bg-[#ffffff90] rounded-t-3xl justify-around items-center h-[70px]">
            <p>Quanto foi doado: <span>R$ {{helpsData().currentValue}},00</span></p>
            <p>Meta: <span>R$ {{helpsData().totalValue}},00</span></p>
            <p>Quanto falta: <span>{{100 - (helpsData().currentValue / helpsData().totalValue) * 100}}%</span></p>

            @if (helpsData().author?.email !== userData.userData()?.user?.email) {
                <form [formGroup]="donateForm" (submit)="onSubmit()" class="flex gap-[10px]">
                    <app-input [controlName]="donateForm.get('value')" type="number" class="p-[10px] rounded-sm"></app-input>
                    <button class="bg-green-400 p-[10px] rounded-sm">Fazer uma doação</button>
                </form>
            } @else {
                <span class="bg-[#FF2E6B] text-[white] font-medium p-[10px] rounded-sm">Esse Helpinho é seu!</span>
            }
        </div>

        <div class="flex flex-col bg-[#ffffff60] w-[80%] h-[80%] rounded-2xl gap-[30px] p-[20px]">
            <div class="flex w-full bg-[#ffffff60] rounded-3xl justify-around items-center h-[70px]">
                <p>Urgente: <span>{{helpsData().urgent ? "Sim" : "Não"}}</span></p>
                <p>Autor: <span>{{helpsData().author?.name}}</span></p>
                <p>Categoria: <span>{{helpsData().category}}</span></p>
                <p>Qtd de Helpers: <span>{{helpsData().helpers?.length}}</span></p>
            </div>

            <div class="flex flex-col bg-[#ffffff60] w-full max-h-[500px] rounded-2xl gap-[50px] p-[20px]">
                <div class="flex flex-col gap-[10px]">
                    <h1>Título</h1>
                    <span>{{helpsData().title}}</span>     
                </div>
                
                <div class="flex flex-col gap-[10px]">
                    <h1>Descrição</h1>
                    <span>{{helpsData().description}}</span>   
                </div>
            </div>
        </div>
    </div>
</section>